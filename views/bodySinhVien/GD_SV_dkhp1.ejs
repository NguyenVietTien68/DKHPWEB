
    
    <div class="container">
        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12" style="text-align: center;">
            <h1>Đăng kí học phần</h1>
        </div>
        <form class="form-horizontal"  action="/sinhvien/dangkyhp">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
            </div>
            <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
                <div class="form-group">
                    <label class="label-control col-xs-4 col-sm-4 col-md-4 col-lg-4 ">Năm học:</label>
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                        <select class="form-control" id="namhochtml" name="namhoc" >
                            <!-- <option value="2021-2022">2021-2022</option>
                            <option value="2022-2023">2022-2023</option>
                            <option value="2023-2024">2023-2024</option>
                            <option value="2024-2025">2024-2025</option> -->
                            <%for(let i=0;i < listnamhoc.length;i++){%>
                                <option value="<%=listnamhoc[i].Nam%>">
                                    <%=listnamhoc[i].Nam%>
                                </option>
                            <%}%>
                        </select>
                        <br>
                    </div>
                </div>
                <div class="form-group">
                    <label class="label-control col-xs-4 col-sm-4 col-md-4 col-lg-4 ">Học kì:</label>
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                        <select class="form-control" id="hockyhtml" name="hocky">
                            <!-- <option value=1>1</option>
                            <option value=2>2</option>
                            <option value=3>3</option>
                            <option value=4>4</option> -->
                            <%for(let i=0;i < listhocky.length;i++){%>
                                <option value="<%=listhocky[i].HocKy%>">
                                    <%=listhocky[i].HocKy%>
                                </option>
                            <%}%>
                        </select>
                        <br>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4"></div>
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                        <button type="submit" id="btnLocMon" class="btn btn-danger" style="display: none;" >Locj</button>
                        <button id="btnLoc" class="btn btn-primary"> Lọc theo thông tin </button>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <h4>Danh sách môn học phần</h4>
                    <table class="table table-bordered" id="table-content">
                        <thead>
                            <tr>
                                <th>Chọn</th>
                                <th>Mã môn</th>
                                <th>Tên môn</th>
                                <th>Tín chỉ</th>
                                <th>Học phần yêu cầu</th>
                                <th>Bắt buộc</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                            <%for(let i=0;i< listmh.length;i++){%>
                                <tr>
                                    <td>
                                        <input name="monhp" type="radio" id=<%=listmh[i].MaMHP%> value=<%=listmh[i].MaMHP%>
                                    </td>
                                    <td><%=listmh[i].MaMHP %></td>
                                    <td><%=listmh[i].TenMHHP %></td>
                                    <td><%=listmh[i].SoTinChi %></td>
                                    <td><%=listmh[i].HocPhanYeuCau %></td>
                                    <td><%=listmh[i].BatBuoc %></td>
                                </tr>
                            <%}%>
                        </tbody>
                    </table>
                    <button id="btnLocLop"  type="submit" class="btn btn-primary">Lấy danh sách lớp</button>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <h4>Danh sách lớp học phần</h4>
                    <table class="table table-bordered" id="table-content">
                        <thead>
                            <tr>
                                <th>Mã lớp học phần</th>
                                <th>Sỉ số lớp</th>
                                <th>Đã đăng ký</th>
                                <th>Tình trạng lớp</th>
                                <th></th> 
                            </tr>
                        </thead>
                        <tbody>
                            <%for(let i=0;i< listlh.length;i++){%>
                                <tr>
                                    <td><%=listlh[i].MaLopHP%></td>
                                    <td><%=listlh[i].SiSo%></td>
                                    <td><%=listlh[i].DaDangKy%></td>
                                    <td> <% if(listlh[i].DaDangKy > 49){ %>
                                       chấp nhận mở lớp
                                        <% } %>
                                        <% if(listlh[i].DaDangKy <= 49){ %>
                                            chờ đăng ký
                                             <% } %>
                                    </td>
                                    <td>
                                        <a href="/sinhvien/dangkyhp/<%=listlh[i].MaLopHP%>"
                                            class="btn btn-danger">Chọn</a>
                                            <!-- <button class="btn btn-primary" id="chuyen1" onclick="nda()"></button>
                                            <button class="btn btn-primary" id="chuyen" onclick='ChonNhom("<%=listlh[i].MaLopHP%>")'>Chọn</button> -->
                                    </td>
                                </tr>
                            <%}%>
                        </tbody>
                    </table>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <h4>Danh sách các lớp học phần đã đăng kí</h4>
                    <table class="table table-bordered" id="table-content">
                        <thead>
                            <tr>
                                <th>Chọn</th>
                                <th>Mã Lớp</th>
                                <th>Tên môn</th>
                                <th>Nhóm</th>
                                <th>Giảng viên</th>
                            </tr>
                        </thead>
                        <tbody>
                            <%for(let i=0;i< listmonhocdadangky.length;i++){%>
                                <tr>
                                    <td>
                                        <input name="lhpddk" id=<%=listmonhocdadangky[i].MaLopHP%> type="radio" value=<%=listmonhocdadangky[i].MaLopHP%>>
                                    </td>
                                    <td><%=listmonhocdadangky[i].MaLopHP%></td>
                                    <td><%=listmonhocdadangky[i].TenMHHP%></td>
                                    <td><%=listmonhocdadangky[i].Nhom%></td>
                                    <td><%=listmonhocdadangky[i].HoTen%></td>
                                </tr>
                            <%}%>
    
                        </tbody>
                    </table>
                            
                    <button type="submit" class="btn btn-danger" name="" id="btnhuy" style="display: none;" >Hủy Đăng kí</button>
                    <button type="button" class="btn btn-danger" name="" onclick="myfun()" value="Click metho">Hủy Đăng kí</button>
                </div>
    
            </form> 
    </div>
    <%for(let c=0; c < listnamhoc.length; c++){%>
        <%if(  namhoc == listnamhoc[c].Nam){%>
            <script>
                $('#namhochtml').val("<%=listnamhoc[c].Nam%>");
          </script>
        <%}%>
    <%}%>
    <%for(let d=0; d < listhocky.length; d++){%>
        <%if( hocky == listhocky[d].HocKy){%>
            <script>
                $('#hockyhtml').val("<%=listhocky[d].HocKy%>");
          </script>
        <%}%>
    <%}%>
    <%if( namhockiemtra1 != namhoc){%>
        <%if( namhoc != undefined){%>
            <script>
                // alert("Đã quá hạn đăng ký ");
                // alert("helo");
                document.getElementById("btnLocLop").disabled = true;
            </script>
        <%}%>
    <%}%>
    <%if(hockykiemtra1 != hocky){%>
        <%if( hocky != undefined){%>
            <script>
                // alert("Đã quá hạn đăng ký ");
                document.getElementById("btnLocLop").disabled = true;
            </script>
        <%}%>
    <%}%>
    <!-- <script>
        let d = new Date();
        let year = d.getFullYear().toString();
        let month = 10;
        // let day = d.getDate();
        if (month <= 5) {
            hockykiemtra = 2;
            year = year - 1;            }
        else if (6 <= month && month <= 7) {
            hockykiemtra = 3;
            year = year - 1;            }
        else if (8 <= month && month <= 12) {
            hockykiemtra = 1;
        }
        function kiemtradangky(){
            
        }
    </script> -->
    <script type="text/javascript">
        // function kiemtranam(){
        //     document.getElementById("btnLocMon").click();
        //     // document.getElementById("btnLocLop").disable=true;
        //     document.getElementById("btnLocLop").disabled = true;
        //     // KhongDangKy;
        //     alert("helo");

        //     // chon.click();
        //     // return true;
        //     // $('#btnLocMon').disabled = true;
        // }
        
        function myfun(){
            var xacnhanhuy = confirm("Bạn có chắc muốn hủy?") ;
            var namhoc = document.getElementById("namhochtml").value;
            var hocky = document.getElementById("hockyhtml").value;
            var huy =document.getElementById("btnhuy");
            
             if(xacnhanhuy==true)
             {
                 huy.click();
                 // location.replace("/sinhvien/dangkyhp?namhoc="+namhoc+"&hocky="+hocky+"&lhpddk="+huy);
                 //location.replace("/sinhvien/dangkyhp?namhoc="+namhoc+"&hocky="+hocky);
                
                 return true;
             }else
                 return false; 
        }
        
           
        function nda(){
            console.log("helo");
            alert("helo");
        }
        // alert("helo");
       
    </script>
